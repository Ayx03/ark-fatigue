# 利用mitmproxy抓包绕过方舟防沉迷
***本教程仅供参考学习使用，严禁用于其他用途***
> 注: 暂时只实现了B服
## 步骤一 搭建服务端
> 服务端，相当于一个每时每刻都在监视或修改网络数据的工具，我们需要根据系统对它先进行搭建
### 安卓系统
1、服务端在安卓系统搭建是通过termux进行的，我们需要先下载termux  
[termux下载地址](https://f-droid.org/packages/com.termux/)
（进去找到最新版本点下载APK即可）  
[下载速度慢可以用网盘](https://pan.baidu.com/s/1L3P_Uq-1zngROkQYrXICuQ)
提取码:mrfz  
2、自行安装termux并打开  
3、复制下面这段命令到termux，并回车，按照指示安装即可（整个过程根据网络和配置在十分钟左右不等，期间会跳出一个存储空间请求，需要同意）  
```
pkg install git -y && rm -rf ark-fatigue; git clone https://gitee.com/jxr2006/ark-fatigue.git; bash ark-fatigue/a.sh
```  
4、显示安装完成后，会出现运行核心程序的选项，输入y则运行，也可以暂时不运行，在下次打开软件时会出现运行的选项，另外，输入
```
python3 ~/ark-fatigue/arknights.py
```
也同样可以运行  
5、运行核心程序后，若输出显示*开始抓包*，恭喜你，服务端已经搭建完毕，可以进入客户端的配置
### windows
暂无
## 步骤二 配置客户端
> 客户端，既运行游戏的系统，我们需要将其对服务端进行对接，使服务端能够监视或修改客户端的数据
***以下所有步骤需要在服务端运行核心程序后进行***
### 普通安卓系统
*由于系统问题，不推荐直接使用安卓真机，建议使用虚拟机的方法*
1、设置->网络–>WLAN->选择连接的wifi长按(不同设备操作方式不同，有些是点击旁边按钮)–>修改网络–>高级选项，将代理选项设置为手动，在代理服务器主机名中填写`127.0.0.1`，在端口上填写`9999`，完成设置后点击保存即可（不用的时候需要改回去，不然影响平时使用）
2、在浏览器打开`http://mitm.it`，点击安卓的第一个选项下载，随后打开会跳出证书安装器，随便起一个英文名字，确认即可
### 安卓虚拟机
由于直接在主机配置wifi网络需要来回切换，直接在真机上容易出自动登录证书问题，且流量党无法使用，这里介绍使用安卓虚拟机的办法  
*注意:termux服务端若安装在同一手机上，需要安装在真机，而不是虚拟机*  
1、下载虚拟机，这里推荐Vmos pro  
[下载地址](http://www.vmos.cn/product_center_vmospro.htm)  
2、添加虚拟机，选择安卓5.1 极客版  
3、把方舟导入虚拟机，并下载完文件  
4、重启虚拟机，打开xposed确认xposed框架启动  
5、下载JustTrustMe  
链接:https://pan.baidu.com/s/1vLdjOWM65Jt0EndqvC3Z0g  
提取码:mrfz  
将安装包导入虚拟机并安装  
6、安装完后会弹出启用xposed插件的提示，同意即可
7、设置->搜索WLAN->选择连接的VMOSwifi长按–>修改网络–>高级选项，将代理选项设置为手动，在代理服务器主机名中填写`127.0.0.1`，在端口上填写`9999`，完成设置后点击保存即可  
8、在虚拟机浏览器打开`http://mitm.it`，点击安卓的第一个选项下载，随后打开会跳出证书安装器，随便起一个英文名字，确认即可  
### 模拟器
暂未写完
## 步骤三 在法定时间内登陆
由于要获取正常时段的用户信息来实现时段外登陆，你需要在时段内登陆一次
## 步骤四 完工！
你已经可以在时段外登陆了，不过要注意，闪断更新和大更新会刷新服务器数据导致登陆失效，需要下一次法定时间登陆来获得新的登陆信息  
**最后要说的是，不要过度的投入以影响到自己的学业哟~**
## 注意事项
暂无
## 其他
此项目为我一人花了一周的研究成果，由于课业紧张，难免会有疏漏，反馈&交流加QQ: 2198818239
